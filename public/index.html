<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…ØªØ¬Ø± Ø¹Ù„ÙŠ Ø§Ù„Ø§Ø­ØªØ±Ø§ÙÙŠ</title>
    <style>
        :root { --gold: #d4af37; --dark: #1a1a1a; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: var(--dark); color: white; text-align: center; margin: 0; padding: 20px; }
        .container { max-width: 600px; margin: auto; background: #2a2a2a; padding: 30px; border-radius: 20px; border: 1px solid var(--gold); box-shadow: 0 10px 30px rgba(0,0,0,0.5); }
        h1 { color: var(--gold); font-size: 2rem; margin-bottom: 30px; }
        .upload-section { background: #333; padding: 20px; border-radius: 15px; margin-bottom: 30px; }
        input[type="file"] { margin: 15px 0; color: #ccc; }
        .btn-upload { background: var(--gold); color: black; border: none; padding: 12px 25px; border-radius: 10px; font-weight: bold; cursor: pointer; width: 100%; }
        .app-card { background: #3d3d3d; margin: 15px 0; padding: 15px; border-radius: 12px; display: flex; justify-content: space-between; align-items: center; border-right: 5px solid var(--gold); }
        .app-name { font-size: 1.1rem; font-weight: 500; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; max-width: 60% }
        .btn-download { background: #28a745; color: white; text-decoration: none; padding: 8px 20px; border-radius: 8px; font-size: 0.9rem; transition: 0.3s; }
        .btn-download:hover { background: #218838; transform: scale(1.05); }
    </style>
</head>
<body>

<div class="container">
    <h1>âœ¨ Ù…ØªØ¬Ø± ØªØ·Ø¨ÙŠÙ‚Ø§Øª Ø¹Ù„ÙŠ âœ¨</h1>
    
    <div class="upload-section">
        <form action="/upload" method="POST" enctype="multipart/form-data">
            <input type="file" name="apkFile" accept=".apk" required>
            <button type="submit" class="btn-upload">ğŸš€ Ø±ÙØ¹ ØªØ·Ø¨ÙŠÙ‚ Ø¬Ø¯ÙŠØ¯</button>
        </form>
    </div>

    <h3>ğŸ“¦ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚Ø§Øª Ø§Ù„Ù…Ø«Ø¨ØªØ©</h3>
    <div id="appsList">Ø¬Ø§Ø±ÙŠ ÙØ­Øµ Ø§Ù„Ù…Ø³ØªÙˆØ¯Ø¹...</div>
</div>

<script>
    async function loadApps() {
        try {
            const response = await fetch('/list-apps');
            const apps = await response.json();
            const listDiv = document.getElementById('appsList');
            
            if (apps.length === 0) {
                listDiv.innerHTML = "<p style='color: #888;'>Ø§Ù„Ù…ØªØ¬Ø± ÙØ§Ø±Øº Ø­Ø§Ù„ÙŠØ§Ù‹</p>";
                return;
            }

            listDiv.innerHTML = '';
            apps.forEach(app => {
                const div = document.createElement('div');
                div.className = 'app-card';
                // ØªÙ… Ø¥Ø¶Ø§ÙØ© attribute 'download' Ù„Ø¶Ù…Ø§Ù† Ø§Ù„ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø¨Ø§Ø´Ø±
                div.innerHTML = `
                    <span class="app-name">ğŸ“± ${app.name}</span>
                    <a href="${app.url}" class="btn-download" download="${app.name}">ØªØ­Ù…ÙŠÙ„ Ù…Ø¨Ø§Ø´Ø±</a>
                `;
                listDiv.appendChild(div);
            });
        } catch (e) {
            console.error("Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª");
        }
    }
    loadApps();
</script>

</body>
</html>
