
<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>متجر علي الاحترافي</title>
    <style>
        :root { --gold: #d4af37; --dark: #121212; --card: #1e1e1e; }
        body { font-family: 'Segoe UI', sans-serif; background: var(--dark); color: white; padding: 20px; }
        .container { max-width: 600px; margin: auto; }
        .admin-box { background: var(--card); border: 1px solid var(--gold); padding: 20px; border-radius: 15px; margin-bottom: 20px; display: none; }
        .input-style { width: 95%; padding: 10px; margin: 5px 0; border-radius: 8px; background: #111; color: white; border: 1px solid #333; }
        .app-card { background: var(--card); padding: 15px; border-radius: 15px; margin-bottom: 15px; display: flex; align-items: center; gap: 15px; border-right: 5px solid var(--gold); }
        .app-icon { width: 60px; height: 60px; border-radius: 12px; object-fit: cover; }
        .app-info { flex-grow: 1; }
        .app-info h4 { margin: 0; color: var(--gold); }
        .app-info p { margin: 5px 0 0; font-size: 13px; color: #aaa; }
        .btn-download { background: var(--gold); color: black; text-decoration: none; padding: 8px 15px; border-radius: 8px; font-weight: bold; font-size: 14px; }
        .btn-admin { background: none; border: 1px solid #444; color: #888; cursor: pointer; padding: 5px 10px; border-radius: 5px; margin-bottom: 20px; }
    </style>
</head>
<body>
    <div class="container">
        <h1 style="text-align:center; color:var(--gold)">✨ متجر تطبيقات علي ✨</h1>
        <button class="btn-admin" onclick="document.getElementById('adminPanel').style.display='block'">دخول المالك ⚙️</button>

        <div id="adminPanel" class="admin-box">
            <form action="/upload" method="POST" enctype="multipart/form-data">
                <input type="password" name="password" placeholder="كلمة السر" class="input-style" required>
                <input type="text" name="appName" placeholder="اسم التطبيق" class="input-style" required>
                <input type="text" name="description" placeholder="وصف قصير" class="input-style">
                <input type="text" name="imageUrl" placeholder="رابط أيقونة (صورة)" class="input-style">
                <input type="file" name="apkFile" accept=".apk" class="input-style" required>
                <button type="submit" style="width:100%; background:var(--gold); padding:10px; border:none; border-radius:8px; font-weight:bold; cursor:pointer">نشر الآن</button>
            </form>
        </div>

        <div id="appsList">جاري التحميل...</div>
    </div>

    <script>
        async function loadApps() {
            const res = await fetch('/list-apps');
            const apps = await res.json();
            const list = document.getElementById('appsList');
            list.innerHTML = '';
            apps.forEach(app => {
                list.innerHTML += `
                    <div class="app-card">
                        <img src="${app.img}" class="app-icon">
                        <div class="app-info">
                            <h4>${app.name}</h4>
                            <p>${app.desc}</p>
                        </div>
                        <a href="${app.url}" class="btn-download" download>تحميل</a>
                    </div>`;
            });
        }
        loadApps();
    </script>
</body>
</html>
