<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…ØªØ¬Ø± Ø¹Ù„ÙŠ Ù„Ù„ØªØ·Ø¨ÙŠÙ‚Ø§Øª</title>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; background-color: #f4f4f4; }
        .container { max-width: 500px; margin: 50px auto; background: white; padding: 20px; border-radius: 10px; box-shadow: 0 0 10px rgba(0,0,0,0.1); }
        .app-item { background: #eee; margin: 10px 0; padding: 10px; border-radius: 5px; display: flex; justify-content: space-between; align-items: center; }
        .download-btn { background: #28a745; color: white; text-decoration: none; padding: 5px 15px; border-radius: 5px; }
        input[type="file"] { margin: 20px 0; }
        button { background: #007bff; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; }
    </style>
</head>
<body>

<div class="container">
    <h1>Ù…ØªØ¬Ø± ØªØ·Ø¨ÙŠÙ‚Ø§ØªÙŠ ğŸ“±</h1>
    
    <form action="/upload" method="POST" enctype="multipart/form-data">
        <input type="file" name="apkFile" accept=".apk" required>
        <br>
        <button type="submit">Ø±ÙØ¹ ØªØ·Ø¨ÙŠÙ‚ Ø¬Ø¯ÙŠØ¯</button>
    </form>

    <hr>

    <h3>Ø§Ù„ØªØ·Ø¨ÙŠÙ‚Ø§Øª Ø§Ù„Ù…ØªØ§Ø­Ø©</h3>
    <div id="appsList">Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©...</div>
</div>

<script>
    // Ø¬Ù„Ø¨ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ØªØ·Ø¨ÙŠÙ‚Ø§Øª Ù…Ù† Ø§Ù„Ø³ÙŠØ±ÙØ±
    async function loadApps() {
        const response = await fetch('/list-apps');
        const apps = await response.json();
        const listDiv = document.getElementById('appsList');
        
        if (apps.length === 0) {
            listDiv.innerHTML = "Ù„Ø§ ØªÙˆØ¬Ø¯ ØªØ·Ø¨ÙŠÙ‚Ø§Øª Ù…Ø±ÙÙˆØ¹Ø© Ø­Ø§Ù„ÙŠØ§Ù‹.";
            return;
        }

        listDiv.innerHTML = '';
        apps.forEach(app => {
            const div = document.createElement('div');
            div.className = 'app-item';
            div.innerHTML = `
                <span>${app.name}</span>
                <a href="${app.url}" class="download-btn" download>ØªØ­Ù…ÙŠÙ„</a>
            `;
            listDiv.appendChild(div);
        });
    }

    loadApps();
</script>

</body>
</html>
