<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…ØªØ¬Ø± Ø¹Ù„ÙŠ Ø§Ù„Ø§Ø­ØªØ±Ø§ÙÙŠ</title>
    <style>
        :root { --gold: #d4af37; --dark: #121212; --card: #1e1e1e; }
        body { font-family: 'Segoe UI', sans-serif; background-color: var(--dark); color: white; margin: 0; padding: 20px; }
        .container { max-width: 600px; margin: auto; }
        header { text-align: center; padding: 40px 0; border-bottom: 2px solid var(--gold); margin-bottom: 30px; }
        h1 { color: var(--gold); text-shadow: 0 0 10px rgba(212, 175, 55, 0.3); }
        
        .admin-box { background: var(--card); border: 1px dashed var(--gold); padding: 20px; border-radius: 15px; margin-bottom: 30px; display: none; } /* Ù…Ø®ÙÙŠ Ø§ÙØªØ±Ø§Ø¶ÙŠØ§Ù‹ */
        
        .app-card { background: var(--card); padding: 20px; border-radius: 15px; margin-bottom: 15px; display: flex; justify-content: space-between; align-items: center; box-shadow: 0 4px 15px rgba(0,0,0,0.3); transition: 0.3s; border: 1px solid transparent; }
        .app-card:hover { border-color: var(--gold); transform: translateY(-3px); }
        
        .download-btn { background: linear-gradient(45deg, #28a745, #1e7e34); color: white; text-decoration: none; padding: 10px 25px; border-radius: 10px; font-weight: bold; }
        
        .btn-toggle { background: none; border: 1px solid #444; color: #888; padding: 5px 10px; border-radius: 5px; cursor: pointer; font-size: 12px; margin-top: 10px; }
        
        .input-style { width: 90%; padding: 12px; margin: 10px 0; border-radius: 8px; border: 1px solid #333; background: #111; color: white; }
        .btn-upload { background: var(--gold); color: black; border: none; padding: 12px; width: 100%; border-radius: 10px; font-weight: bold; cursor: pointer; }
    </style>
</head>
<body>

<div class="container">
    <header>
        <h1>âœ¨ Ù…ØªØ¬Ø± ØªØ·Ø¨ÙŠÙ‚Ø§Øª Ø¹Ù„ÙŠ âœ¨</h1>
        <button class="btn-toggle" onclick="toggleAdmin()">Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ø§Ù„Ùƒ âš™ï¸</button>
    </header>

    <div id="adminPanel" class="admin-box">
        <h3 style="color: var(--gold); margin-top: 0;">Ø§Ù„Ø±ÙØ¹ Ø§Ù„Ø¢Ù…Ù† Ù„Ù„Ù…Ø§Ù„Ùƒ</h3>
        <form action="/upload" method="POST" enctype="multipart/form-data">
            <input type="password" name="password" placeholder="Ø£Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ø³Ø±ÙŠØ©" class="input-style" required>
            <input type="file" name="apkFile" accept=".apk" class="input-style" required>
            <button type="submit" class="btn-upload">Ù†Ø´Ø± Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø¢Ù†</button>
        </form>
    </div>

    <h3>ğŸ“¦ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚Ø§Øª Ø§Ù„Ù…ØªØ§Ø­Ø©</h3>
    <div id="appsList">Ø¬Ø§Ø±ÙŠ Ø¬Ù„Ø¨ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚Ø§Øª...</div>
</div>

<script>
    function toggleAdmin() {
        const panel = document.getElementById('adminPanel');
        panel.style.display = panel.style.display === 'block' ? 'none' : 'block';
    }

    async function loadApps() {
        const response = await fetch('/list-apps');
        const apps = await response.json();
        const listDiv = document.getElementById('appsList');
        
        if (apps.length === 0) {
            listDiv.innerHTML = "<p style='color: #666;'>Ù„Ø§ ØªÙˆØ¬Ø¯ ØªØ·Ø¨ÙŠÙ‚Ø§Øª Ù…Ø±ÙÙˆØ¹Ø© Ø¨Ø¹Ø¯.</p>";
            return;
        }

        listDiv.innerHTML = '';
        apps.forEach(app => {
            const div = document.createElement('div');
            div.className = 'app-card';
            div.innerHTML = `
                <div>
                    <div style="font-weight: bold;">${app.name}</div>
                    <div style="font-size: 12px; color: #888;">Ù†Ø³Ø®Ø© APK Ø¢Ù…Ù†Ø©</div>
                </div>
                <a href="${app.url}" class="download-btn" download>ØªØ­Ù…ÙŠÙ„</a>
            `;
            listDiv.appendChild(div);
        });
    }
    loadApps();
</script>

</body>
</html>
